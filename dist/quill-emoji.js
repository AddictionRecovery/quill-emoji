!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.shortNameEmoji=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},l=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=n(3),u=Quill.import("delta"),d=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var s=document.createElement(e);return Object.keys(t).forEach(function(e){return s[e]=t[e]}),i.forEach(function(e){"string"==typeof e&&(e=document.createTextNode(e)),s.appendChild(e)}),s},p=Quill.import("blots/inline"),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),r(t,[{key:"format",value:function(e,n){"emoji"===e&&n?this.domNode.dataset.unicode=n:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}},{key:"formats",value:function(){var e=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formats",this).call(this);return e.emoji=t.formats(this.domNode),e}}],[{key:"create",value:function(e){var n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this);return n.dataset.unicode=e,n}},{key:"formats",value:function(e){return e.dataset.unicode}}]),t}(p);Quill.register({"formats/emoji":f});var m=function(){function e(t,n){i(this,e),this.fuseOptions={shouldSort:!0,threshold:.1,location:0,distance:100,maxPatternLength:32,minMatchCharLength:3,keys:["shortname"]},this.emojiList=h.emojiList,this.fuse=new c.default(this.emojiList,this.fuseOptions),this.quill=t,this.onClose=n.onClose,this.onOpen=n.onOpen,this.container=document.createElement("ul"),this.container.classList.add("emoji_completions"),this.quill.container.appendChild(this.container),this.container.style.position="absolute",this.container.style.display="none",this.onSelectionChange=this.maybeUnfocus.bind(this),this.onTextChange=this.update.bind(this),this.open=!1,this.atIndex=null,this.focusedButton=null,this.isWhiteSpace=function(e){var t=!1;return/\s/.test(e)&&(t=!0),t},t.keyboard.addBinding({key:186,shiftKey:!0},this.onAtKey.bind(this)),t.keyboard.addBinding({key:39,collapsed:!0,format:["emoji"]},this.handleArrow.bind(this)),t.keyboard.addBinding({key:40,collapsed:!0,format:["emoji"]},this.handleArrow.bind(this))}return r(e,[{key:"onAtKey",value:function(e,t){if(this.open)return!0;e.length>0&&this.quill.deleteText(e.index,e.length,Quill.sources.USER),this.quill.insertText(e.index,":","emoji",Quill.sources.USER);var n=this.quill.getBounds(e.index);this.quill.setSelection(e.index+1,Quill.sources.SILENT),this.atIndex=e.index,n.left+250>this.quill.container.offsetWidth?this.container.style.left=n.left-250+"px":this.container.style.left=n.left+"px",this.container.style.top=n.top+n.height+"px",this.open=!0,this.quill.on("text-change",this.onTextChange),this.quill.once("selection-change",this.onSelectionChange),this.update(),this.onOpen&&this.onOpen()}},{key:"handleArrow",value:function(){if(!this.open)return!0;this.buttons[0].classList.remove("emoji-active"),this.buttons[0].focus(),this.buttons.length>1&&this.buttons[1].focus()}},{key:"update",value:function(){var e=this.quill.getSelection().index;if(this.atIndex>=e)return this.close(null);if(this.query=this.quill.getText(this.atIndex+1,e-this.atIndex-1),!event&&this.isWhiteSpace(this.query))return void this.close(null);this.query=this.query.trim();var t=this.fuse.search(this.query);if(t.sort(function(e,t){return e.emoji_order-t.emoji_order}),this.query.length<3||0==t.length)return void(this.container.style.display="none");t.length>50&&(t=t.slice(0,40)),this.renderCompletions(t)}},{key:"maybeUnfocus",value:function(){this.container.querySelector("*:focus")||this.close(null)}},{key:"renderCompletions",value:function(e){var t=this;if(event){if("Enter"===event.key||13===event.keyCode)return this.enterEmoji(e[0]),void(this.container.style.display="none");if("Tab"===event.key||9===event.keyCode)return this.quill.disable(),this.buttons[0].classList.remove("emoji-active"),void this.buttons[1].focus()}if(!event){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);var n=Array(e.length);this.buttons=n;var i=function(e,i){return function(o){if("ArrowRight"===o.key||39===o.keyCode)o.preventDefault(),n[Math.min(n.length-1,e+1)].focus();else if("Tab"===o.key||9===o.keyCode){if(o.preventDefault(),e+1==n.length)return void n[0].focus();n[Math.min(n.length-1,e+1)].focus()}else"ArrowLeft"===o.key||37===o.keyCode?(o.preventDefault(),n[Math.max(0,e-1)].focus()):"ArrowDown"===o.key||40===o.keyCode?(o.preventDefault(),n[Math.min(n.length-1,e+1)].focus()):"ArrowUp"===o.key||38===o.keyCode?(o.preventDefault(),n[Math.max(0,e-1)].focus()):"Enter"!==o.key&&13!==o.keyCode&&" "!==o.key&&32!==o.keyCode&&"Tab"!==o.key&&9!==o.keyCode||(o.preventDefault(),t.quill.enable(),t.close(i))}};if(e.forEach(function(e,o){console.log("this.query",t),console.log("emoji",e),console.log("i",o);var s=d("li",{},d("button",{type:"button"},d("span",{className:"ico",innerHTML:e.code_decimal}),d("span",{className:"unmatched"},e.shortname)));t.container.appendChild(s),n[o]=s.firstChild,n[o].addEventListener("keydown",i(o,e)),n[o].addEventListener("mousedown",function(){return t.close(e)}),n[o].addEventListener("focus",function(){return t.focusedButton=o}),n[o].addEventListener("unfocus",function(){return t.focusedButton=null})}),this.container.style.display="block",this.quill.container.classList.contains("top-emoji")){var o=this.container.querySelectorAll("li"),s=void 0;for(s=0;s<o.length;s++)o[s].style.display="block";this.container.offsetHeight>0&&(this.container.style.top="-"+this.container.offsetHeight+"px")}n[0].classList.add("emoji-active")}}},{key:"close",value:function(e){for(this.quill.enable(),this.container.style.display="none";this.container.firstChild;)this.container.removeChild(this.container.firstChild);if(this.quill.off("selection-change",this.onSelectionChange),this.quill.off("text-change",this.onTextChange),e){var t=(e.name,e.unicode),n=(e.shortname,e.code_decimal),i=d("span",{className:"ico",innerHTML:" "+n+" "}),o=i.innerHTML;this.quill.deleteText(this.atIndex,this.query.length+1,Quill.sources.USER),this.quill.insertText(this.atIndex,o,"emoji",t,Quill.sources.USER),this.quill.insertText(this.atIndex+o.length," ","emoji",!1,Quill.sources.USER),this.quill.setSelection(this.atIndex+o.length,0,Quill.sources.SILENT)}this.quill.focus(),this.open=!1,this.onClose&&this.onClose(e)}},{key:"enterEmoji",value:function(e){if(e){var t=(e.name,e.unicode,e.shortname,e.code_decimal),n=d("span",{className:"ico",innerHTML:" "+t+" "}),i=n.innerHTML,o=(new u,this.quill.getSelection()),s=[];if(this.atIndex>0){var r=o.index-this.query.length;r>2&&(r-=2),s.push({retain:r})}s=s.concat([{delete:this.query.length+1},{insert:i,attributes:{emoji:!0}},{delete:1}]),quill.updateContents({ops:s})}this.quill.blur(),this.open=!1,this.onClose&&this.onClose(e)}}]),e}();Quill.register("modules/short_name_emoji",m),t.shortNameEmoji=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=document.getElementById("emoji-palette");document.getElementById("emoji-close-div").style.display="none",e&&e.remove()}function s(e){var t=document.getElementById("emoji-palette");t?t.remove():a(e)}function r(e){return e.getSelection()}function a(e){var t=document.createElement("div"),n=(document.querySelector(".ql-toolbar"),e.getSelection()),i=e.getBounds(n.index);e.container.appendChild(t);var s=i.left+250;t.id="emoji-palette",t.style.top=10+i.top+i.height+"px",s>e.container.offsetWidth?t.style.left=i.left-250+"px":t.style.left=i.left+"px";var r=document.createElement("div");r.id="tab-toolbar",t.appendChild(r);var a=document.createElement("div");a.id="tab-panel",t.appendChild(a);var c=[{type:"p",name:"people",content:'<div class="i-people"></div>'},{type:"n",name:"nature",content:'<div class="i-nature"></div>'},{type:"d",name:"food",content:'<div class="i-food"></div>'},{type:"s",name:"symbols",content:'<div class="i-symbols"></div>'},{type:"a",name:"activity",content:'<div class="i-activity"></div>'},{type:"t",name:"travel",content:'<div class="i-travel"></div>'},{type:"o",name:"objects",content:'<div class="i-objects"></div>'},{type:"f",name:"flags",content:'<div class="i-flags"></div>'}],u=document.createElement("ul");if(r.appendChild(u),null===document.getElementById("emoji-close-div")){var d=document.createElement("div");d.id="emoji-close-div",d.addEventListener("click",o,!1),document.getElementsByTagName("body")[0].appendChild(d)}else document.getElementById("emoji-close-div").style.display="block";c.map(function(t){var n=document.createElement("li");n.classList.add("emoji-tab"),n.classList.add("filter-"+t.name);var i=t.content;n.innerHTML=i,n.dataset.filter=t.type,u.appendChild(n);var o=document.querySelector(".filter-"+t.name);o.addEventListener("click",function(){var t=document.querySelector(".active");t&&t.classList.remove("active"),o.classList.toggle("active"),h(o,a,e)})}),l(a,e)}function l(e,t){c("p",e,t),document.querySelector(".filter-people").classList.add("active")}function c(e,t,n){var i={shouldSort:!0,matchAllTokens:!0,threshold:.3,location:0,distance:100,maxPatternLength:32,minMatchCharLength:3,keys:["category"]},o=new Fuse(emojiList,i),s=o.search(e);s.sort(function(e,t){return e.emoji_order-t.emoji_order}),n.focus();var a=r(n);s.map(function(e){var i=document.createElement("span"),o=document.createTextNode(e.shortname);i.appendChild(o),i.classList.add("bem"),i.classList.add("bem-"+e.name);var s=""+e.code_decimal;i.innerHTML=s+" ",t.appendChild(i);var r=document.querySelector(".bem-"+e.name);r&&r.addEventListener("click",function(){n.insertText(a.index,r.innerHTML),n.setSelection(a.index+r.innerHTML.length,0),a.index=a.index+r.innerHTML.length})})}function h(e,t,n){for(;t.firstChild;)t.removeChild(t.firstChild);c(e.dataset.filter,t,n)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){i(this,e),this.quill=t,this.toolbar=t.getModule("toolbar"),void 0!==this.toolbar&&this.toolbar.addHandler("emoji",this.checkPalatteExist);var n=document.getElementsByClassName("ql-emoji");n&&[].slice.call(n).forEach(function(e){e.innerHTML='<svg viewbox="0 0 18 18"><circle class="ql-fill" cx="7" cy="7" r="1"></circle><circle class="ql-fill" cx="11" cy="7" r="1"></circle><path class="ql-stroke" d="M7,10a2,2,0,0,0,4,0H7Z"></path><circle class="ql-stroke" cx="9" cy="9" r="6"></circle></svg>'})}return u(e,[{key:"checkPalatteExist",value:function(){var e=this.quill;s(e),this.quill.on("text-change",function(t,n,i){"user"==i&&(o(),r(e))})}}]),e}();Quill.register("modules/toolbar_emoji",d)},function(e,t){},function(e,t,n){"use strict"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(2),s=(i(o),n(0)),r=(i(s),n(1));i(r)},function(e,t,n){!function(t){"use strict";function n(){console.log.apply(console,arguments)}function i(e,t){var n;this.list=e,this.options=t=t||{};for(n in a)a.hasOwnProperty(n)&&("boolean"==typeof a[n]?this.options[n]=n in t?t[n]:a[n]:this.options[n]=t[n]||a[n])}function o(e,t,n){var i,r,a,l,c,h;if(t){if(a=t.indexOf("."),-1!==a?(i=t.slice(0,a),r=t.slice(a+1)):i=t,null!==(l=e[i])&&void 0!==l)if(r||"string"!=typeof l&&"number"!=typeof l)if(s(l))for(c=0,h=l.length;c<h;c++)o(l[c],r,n);else r&&o(l,r,n);else n.push(l)}else n.push(e);return n}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e,t){t=t||{},this.options=t,this.options.location=t.location||r.defaultOptions.location,this.options.distance="distance"in t?t.distance:r.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:r.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||r.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var a={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:r,sortFn:function(e,t){return e.score-t.score},getFn:o,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};i.VERSION="2.7.3",i.prototype.set=function(e){return this.list=e,e},i.prototype.search=function(e){return this.options.verbose&&n("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort(),this._format()},i.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,i=t.split(e.tokenSeparator),o=0,s=i.length;if(this.options.tokenize)for(this.tokenSearchers=[];o<s;o++)this.tokenSearchers.push(new n(i[o],e));this.fullSeacher=new n(t,e)},i.prototype._startSearch=function(){var e,t,n,i,o=this.options,s=o.getFn,r=this.list,a=r.length,l=this.options.keys,c=l.length,h=null;if("string"==typeof r[0])for(n=0;n<a;n++)this._analyze("",r[n],n,n);else for(this._keyMap={},n=0;n<a;n++)for(h=r[n],i=0;i<c;i++){if("string"!=typeof(e=l[i])){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,s(h,e,[]),h,n)}},i.prototype._analyze=function(e,t,i,o){var r,a,l,c,h,u,d,p,f,m,y,v,g,b,k,x=this.options,_=!1;if(void 0!==t&&null!==t){a=[];var L=0;if("string"==typeof t){if(r=t.split(x.tokenSeparator),x.verbose&&n("---------\nKey:",e),this.options.tokenize){for(b=0;b<this.tokenSearchers.length;b++){for(p=this.tokenSearchers[b],x.verbose&&n("Pattern:",p.pattern),f=[],v=!1,k=0;k<r.length;k++){m=r[k],y=p.search(m);var S={};y.isMatch?(S[m]=y.score,_=!0,v=!0,a.push(y.score)):(S[m]=1,this.options.matchAllTokens||a.push(1)),f.push(S)}v&&L++,x.verbose&&n("Token scores:",f)}for(c=a[0],u=a.length,b=1;b<u;b++)c+=a[b];c/=u,x.verbose&&n("Token score average:",c)}d=this.fullSeacher.search(t),x.verbose&&n("Full text score:",d.score),h=d.score,void 0!==c&&(h=(h+c)/2),x.verbose&&n("Score average:",h),g=!this.options.tokenize||!this.options.matchAllTokens||L>=this.tokenSearchers.length,x.verbose&&n("Check Matches",g),(_||d.isMatch)&&g&&(l=this.resultMap[o],l?l.output.push({key:e,score:h,matchedIndices:d.matchedIndices}):(this.resultMap[o]={item:i,output:[{key:e,score:h,matchedIndices:d.matchedIndices}]},this.results.push(this.resultMap[o])))}else if(s(t))for(b=0;b<t.length;b++)this._analyze(e,t[b],i,o)}},i.prototype._computeScore=function(){var e,t,i,o,s,r,a,l,c,h=this._keyMap,u=this.results;for(this.options.verbose&&n("\n\nComputing score:\n"),e=0;e<u.length;e++){for(i=0,o=u[e].output,s=o.length,l=1,t=0;t<s;t++)r=o[t].score,a=h?h[o[t].key].weight:1,c=r*a,1!==a?l=Math.min(l,c):(i+=c,o[t].nScore=c);u[e].score=1===l?i/s:l,this.options.verbose&&n(u[e])}},i.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&n("\n\nSorting...."),this.results.sort(e.sortFn))},i.prototype._format=function(){var e,t,i,o,s=this.options,r=s.getFn,a=[],l=this.results,c=s.include;for(s.verbose&&n("\n\nOutput:\n\n",l),i=s.id?function(e){l[e].item=r(l[e].item,s.id,[])[0]}:function(){},o=function(e){var t,n,i,o,s,r=l[e];if(c.length>0){if(t={item:r.item},-1!==c.indexOf("matches"))for(i=r.output,t.matches=[],n=0;n<i.length;n++)o=i[n],s={indices:o.matchedIndices},o.key&&(s.key=o.key),t.matches.push(s);-1!==c.indexOf("score")&&(t.score=l[e].score)}else t=r.item;return t},e=0,t=l.length;e<t;e++)i(e),a.push(o(e));return a},r.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},r.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},r.prototype._bitapScore=function(e,t){var n=e/this.patternLen,i=Math.abs(this.options.location-t);return this.options.distance?n+i/this.options.distance:i?1:n},r.prototype.search=function(e){var t,n,i,o,s,r,a,l,c,h,u,d,p,f,m,y,v,g,b,k,x,_,L,S=this.options;if(e=S.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>S.maxPatternLength){if(g=e.match(new RegExp(this.pattern.replace(S.tokenSeparator,"|"))),b=!!g)for(x=[],t=0,_=g.length;t<_;t++)L=g[t],x.push([e.indexOf(L),L.length-1]);return{isMatch:b,score:b?.5:1,matchedIndices:x}}for(o=S.findAllMatches,s=S.location,i=e.length,r=S.threshold,a=e.indexOf(this.pattern,s),k=[],t=0;t<i;t++)k[t]=0;for(-1!=a&&(r=Math.min(this._bitapScore(0,a),r),-1!=(a=e.lastIndexOf(this.pattern,s+this.patternLen))&&(r=Math.min(this._bitapScore(0,a),r))),a=-1,y=1,v=[],h=this.patternLen+i,t=0;t<this.patternLen;t++){for(l=0,c=h;l<c;)this._bitapScore(t,s+c)<=r?l=c:h=c,c=Math.floor((h-l)/2+l);for(h=c,u=Math.max(1,s-c+1),d=o?i:Math.min(s+c,i)+this.patternLen,p=Array(d+2),p[d+1]=(1<<t)-1,n=d;n>=u;n--)if(m=this.patternAlphabet[e.charAt(n-1)],m&&(k[n-1]=1),p[n]=(p[n+1]<<1|1)&m,0!==t&&(p[n]|=(f[n+1]|f[n])<<1|1|f[n+1]),p[n]&this.matchmask&&(y=this._bitapScore(t,n-1))<=r){if(r=y,a=n-1,v.push(a),a<=s)break;u=Math.max(1,2*s-a)}if(this._bitapScore(t+1,s)>r)break;f=p}return x=this._getMatchedIndices(k),{isMatch:a>=0,score:0===y?.001:y,matchedIndices:x}},r.prototype._getMatchedIndices=function(e){for(var t,n=[],i=-1,o=-1,s=0,r=e.length;s<r;s++)t=e[s],t&&-1===i?i=s:t||-1===i||(o=s-1,o-i+1>=this.options.minMatchCharLength&&n.push([i,o]),i=-1);return e[s-1]&&s-1-i+1>=this.options.minMatchCharLength&&n.push([i,s-1]),n},e.exports=i}()}]);